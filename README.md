запускаем celery с 5 воркерами
```
celery -A main worker --loglevel=INFO --concurrency=5
```
отправляем задачи 
```
python client.py
```
там 10 задач от user_1, пауза 5сек, 6 задач от user_2 и 5 от различных user_3 - user_7

все задачи по 10 секунд, ограничение 2 задачи на пользователя 

лог без ограничения -> сначала выполняются все задачи от user_1
```
2022-03-31 11:57:16,106 | DEBUG | START user_1
2022-03-31 11:57:16,106 | DEBUG | START user_1
2022-03-31 11:57:16,110 | DEBUG | START user_1
2022-03-31 11:57:16,110 | DEBUG | START user_1
2022-03-31 11:57:16,114 | DEBUG | START user_1
2022-03-31 11:57:26,115 | DEBUG | SUCCESS user_1 df2c18ad-1923-48d3-9601-0d3be9d5a5b0
2022-03-31 11:57:26,115 | DEBUG | SUCCESS user_1 0fe5d43c-5eb7-4e37-a54f-1a7344eba2b9
2022-03-31 11:57:26,122 | DEBUG | SUCCESS user_1 021651e8-54a3-438e-ba51-739aca8b554e
2022-03-31 11:57:26,122 | DEBUG | SUCCESS user_1 de5cf933-e9f1-4ceb-a2b9-311b1f0f23b8
2022-03-31 11:57:26,125 | DEBUG | START user_1
2022-03-31 11:57:26,125 | DEBUG | START user_1
2022-03-31 11:57:26,128 | DEBUG | SUCCESS user_1 49f8a6c4-5fb5-4b3b-ac1a-bc131e2a0dfa
2022-03-31 11:57:26,132 | DEBUG | START user_1
2022-03-31 11:57:26,132 | DEBUG | START user_1
2022-03-31 11:57:26,136 | DEBUG | START user_1
2022-03-31 11:57:36,128 | DEBUG | SUCCESS user_1 433a9d9e-98bc-48b7-b812-c091bda0b14a
2022-03-31 11:57:36,129 | DEBUG | SUCCESS user_1 54a7aa10-d41c-4a5c-8d4b-6da38a15472b
2022-03-31 11:57:36,132 | DEBUG | START user_2
2022-03-31 11:57:36,132 | DEBUG | START user_2
2022-03-31 11:57:36,134 | DEBUG | SUCCESS user_1 a3603a50-32ae-4aaa-b64e-7e4a96ddc97b
2022-03-31 11:57:36,134 | DEBUG | SUCCESS user_1 8ae1e9df-a95f-4487-a7dd-4291040a721f
2022-03-31 11:57:36,138 | DEBUG | START user_2
2022-03-31 11:57:36,138 | DEBUG | START user_2
2022-03-31 11:57:36,139 | DEBUG | SUCCESS user_1 45211eb2-aec3-4b98-8f9c-8ad57f18c03f
2022-03-31 11:57:36,142 | DEBUG | START user_2
2022-03-31 11:57:46,136 | DEBUG | SUCCESS user_2 a3b134d5-6380-4f08-a657-69690ae56066
2022-03-31 11:57:46,136 | DEBUG | SUCCESS user_2 07037736-1d81-472f-9c10-0c0487c53c2b
2022-03-31 11:57:46,141 | DEBUG | SUCCESS user_2 c7619a84-8951-41b3-8c55-e4c90b0aadee
2022-03-31 11:57:46,141 | DEBUG | SUCCESS user_2 a2c78811-6b37-43c8-bf71-a9cea2846a36
2022-03-31 11:57:46,142 | DEBUG | START user_2
2022-03-31 11:57:46,142 | DEBUG | START user_3
2022-03-31 11:57:46,144 | DEBUG | SUCCESS user_2 237cd862-4d38-4daf-9b82-2320294b7328
2022-03-31 11:57:46,145 | DEBUG | START user_4
2022-03-31 11:57:46,145 | DEBUG | START user_5
2022-03-31 11:57:46,148 | DEBUG | START user_6
2022-03-31 11:57:56,146 | DEBUG | SUCCESS user_2 3862ff9c-0aad-4cec-a164-94aaf549288c
2022-03-31 11:57:56,146 | DEBUG | SUCCESS user_3 7e44cc19-02f5-4f20-ad30-9dddcc900621
2022-03-31 11:57:56,148 | DEBUG | SUCCESS user_4 3a7566a5-ecc7-4ce8-bf8a-64898cb092ce
2022-03-31 11:57:56,148 | DEBUG | SUCCESS user_5 2c85d803-4b94-4ff1-8ba1-48ef856d0c84
2022-03-31 11:57:56,150 | DEBUG | START user_7
2022-03-31 11:57:56,150 | DEBUG | SUCCESS user_6 dc0d27a2-f4ed-4592-9d07-04dc2c26b7b0
2022-03-31 11:58:06,153 | DEBUG | SUCCESS user_7 e694c0a0-95d6-43f3-a9a8-8e4eab0dd3b0
```
лог с ограничением
```
2022-03-31 11:46:22,230 | DEBUG | START user_1
2022-03-31 11:46:22,230 | DEBUG | START user_1
2022-03-31 11:46:27,245 | DEBUG | START user_2
2022-03-31 11:46:27,245 | DEBUG | START user_2
2022-03-31 11:46:27,285 | DEBUG | START user_3
2022-03-31 11:46:32,238 | DEBUG | SUCCESS user_1 1811df1a-b6d1-4051-aec6-55e69d52ceb4
2022-03-31 11:46:32,238 | DEBUG | SUCCESS user_1 d5366725-3cc9-4ca5-a897-43a6a169a121
2022-03-31 11:46:32,241 | DEBUG | START user_4
2022-03-31 11:46:32,241 | DEBUG | START user_5
2022-03-31 11:46:37,248 | DEBUG | SUCCESS user_2 261f810e-62d5-4c3e-80cd-4bfc50a620c3
2022-03-31 11:46:37,248 | DEBUG | SUCCESS user_2 d0721a3c-edbd-4e4b-a4db-c30504c3d927
2022-03-31 11:46:37,252 | DEBUG | START user_6
2022-03-31 11:46:37,252 | DEBUG | START user_7
2022-03-31 11:46:37,288 | DEBUG | SUCCESS user_3 5d3c0eeb-e984-4535-b854-a8c6efe959f3
2022-03-31 11:46:37,292 | DEBUG | START user_1
2022-03-31 11:46:42,245 | DEBUG | SUCCESS user_5 9eb74d73-842f-4650-9ce7-9f5cd9c9860e
2022-03-31 11:46:42,245 | DEBUG | SUCCESS user_4 685e4aa5-55b6-44fb-9e1b-4d73f88f6726
2022-03-31 11:46:42,250 | DEBUG | START user_1
2022-03-31 11:46:42,292 | DEBUG | START user_2
2022-03-31 11:46:47,256 | DEBUG | SUCCESS user_6 2589e628-332c-444d-9e5b-7b0240019db7
2022-03-31 11:46:47,257 | DEBUG | SUCCESS user_7 6c7cbe64-9471-4f1b-b5d6-0343cb5268e9
2022-03-31 11:46:47,261 | DEBUG | START user_2
2022-03-31 11:46:47,296 | DEBUG | SUCCESS user_1 5005960d-b988-46ab-97de-305f08f01bc6
2022-03-31 11:46:50,268 | DEBUG | START user_1
2022-03-31 11:46:52,254 | DEBUG | SUCCESS user_1 82aea266-f3b4-40e7-b7c3-da2dfbea1bfa
2022-03-31 11:46:52,294 | DEBUG | SUCCESS user_2 d4b0d501-1a7b-416b-98de-f8351c104c6d
2022-03-31 11:46:55,269 | DEBUG | START user_2
2022-03-31 11:46:57,264 | DEBUG | SUCCESS user_2 e68c6910-6264-4a9c-9a30-f733c36f46e5
2022-03-31 11:46:58,278 | DEBUG | START user_1
2022-03-31 11:47:00,273 | DEBUG | SUCCESS user_1 71f91872-7be7-4896-9839-d12b66c6c9e1
2022-03-31 11:47:03,407 | DEBUG | START user_2
2022-03-31 11:47:05,274 | DEBUG | SUCCESS user_2 cc61c724-34dd-4f72-bdad-7a5d166774ce
2022-03-31 11:47:06,290 | DEBUG | START user_1
2022-03-31 11:47:08,282 | DEBUG | SUCCESS user_1 fe232ef1-816c-4489-88cd-3b03962a520c
2022-03-31 11:47:13,410 | DEBUG | SUCCESS user_2 5ba81408-d125-4cc6-b837-5368ef4429db
2022-03-31 11:47:14,308 | DEBUG | START user_1
2022-03-31 11:47:16,295 | DEBUG | SUCCESS user_1 82030ca7-e513-472e-badb-3f8c13ea4602
2022-03-31 11:47:22,324 | DEBUG | START user_1
2022-03-31 11:47:24,313 | DEBUG | SUCCESS user_1 8c0f0038-4d0e-43c0-a139-7a53bc2e3372
2022-03-31 11:47:30,394 | DEBUG | START user_1
2022-03-31 11:47:32,327 | DEBUG | SUCCESS user_1 b9af7580-7cc7-4bdd-ac5e-53b626409e5b
2022-03-31 11:47:40,398 | DEBUG | SUCCESS user_1 ab7bad20-796a-4fd2-b8fc-562b68532ba3
```
